var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,s=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&i(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&i(e,a,t[a]);return e},o=(e,r)=>t(e,a(r)),c=(e,t)=>{var a={};for(var i in e)l.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&r)for(var i of r(e))t.indexOf(i)<0&&n.call(e,i)&&(a[i]=e[i]);return a};import{R as m,T as p,F as u,ab as d,_ as E,E as f,V as b,af as y,J as g,M as h,Q as v,a6 as x,ah as C,K as w}from"./vendor.js";import{P as k}from"./index5.js";import{u as T}from"./index23.js";import{u as O}from"./index25.js";import"./index7.js";import"./index26.js";const j=()=>m.createElement("div",{className:"table-empty-block"},m.createElement("div",{className:"result-image"},m.createElement("img",{alt:"data empty",src:"//img.alicdn.com/tfs/TB1_yJXFkL0gK0jSZFAXXcA9pXa-1112-758.png"})),m.createElement("div",{className:"result-title"},"\u6570\u636e\u4e3a\u7a7a")),S=({onRefresh:e})=>m.createElement("div",{className:"table-empty-block"},m.createElement("div",{className:"result-image"},m.createElement("img",{alt:"data empty",src:"//img.alicdn.com/tfs/TB1_yJXFkL0gK0jSZFAXXcA9pXa-1112-758.png"})),m.createElement("div",{className:"result-title"},m.createElement(p,{type:"secondary",onClick:e},"\u91cd\u65b0\u52a0\u8f7d"))),P=u.Item,F={labelCol:{span:4},wrapperCol:{span:20}},q=(e,t)=>{const{actionType:a}=e,r=e.dataSource||{},l=d.useField([]);E.exports.useEffect((()=>{if(l.reset(),r){const e={name:r.name.last,email:r.email,phone:r.phone,gender:r.gender};l.setValues(e)}}),[l,r]),E.exports.useImperativeHandle(t,(()=>({getValues(e){l.validate(((t,a)=>{t||e(a)}))}})));const n="preview"===a;return m.createElement(m.Fragment,null,m.createElement(u,s({isPreview:n,fullWidth:!0,labelAlign:n?"left":"top",field:l},F),m.createElement(P,{label:"\u59d3\u540d:",required:!n,requiredMessage:"\u5fc5\u586b"},m.createElement(f,s({},l.init("name")))),m.createElement(P,{label:"\u90ae\u7bb1:",format:"email",required:!n,requiredMessage:"\u5fc5\u586b"},m.createElement(f,{name:"email"})),m.createElement(P,{label:"\u624b\u673a\u53f7:",format:"tel",required:!n,requiredMessage:"\u5fc5\u586b"},m.createElement(f,{name:"phone"})),m.createElement(P,{label:"\u6027\u522b:",required:!n,requiredMessage:"\u5fc5\u586b"},m.createElement(b,{name:"gender",dataSource:[{value:"male",label:"\u7537"},{value:"female",label:"\u5973"}]}))))};var z=m.forwardRef(q);const{useRef:V,useCallback:X}=g,$=e=>{switch(e){default:return"\u6dfb\u52a0\u5458\u5de5";case"edit":return"\u7f16\u8f91\u5458\u5de5";case"preview":return"\u9884\u89c8\u5458\u5de5"}},A=e=>{const t=e,{actionType:a,dataSource:r,onOk:l=(()=>{})}=t,n=c(t,["actionType","dataSource","onOk"]),i=V(null),m=X((()=>{if("preview"===a)return l(null);i.current.getValues((e=>{l(e)}))}),[a,l]);return E.exports.createElement(y,o(s({shouldUpdatePosition:!0,isFullScreen:!0,title:$(a),style:{width:600},footerAlign:"center"},n),{onOk:m}),E.exports.createElement(z,{ref:i,actionType:a,dataSource:r}))},I=undefined;var N="_dialogTable_1k07e_1";const R=({current:e,pageSize:t},a)=>{if(!a.status||"normal"===a.status){let r=`page=${e}&size=${t}`;return Object.entries(a).forEach((([e,t])=>{t&&(r+=`&${e}=${t}`)})),fetch(`https://randomuser.me/api?results=${t}&${r}`).then((e=>e.json())).then((e=>({total:55,list:e.results.slice(0,10)})))}return"empty"===a.status?Promise.resolve([]):"exception"===a.status?new Promise(((e,t)=>{setTimeout((()=>{t(new Error("data exception"))}),1e3)})):Promise.resolve([])},_={name:140,email:500,phone:500,gender:140,operation:150},M=()=>{const[e,t]=O({columnWidth:_,optCol:null,actionType:"preview",actionVisible:!1}),{actionVisible:a,columnWidth:r,optCol:l}=e,n=d.useField([]),{paginationProps:i,tableProps:c,search:u,error:f,refresh:b}=T(R,{field:n}),{reset:g}=u,w=(e,a)=>{const l=s({},r);l[e]+=a,t({columnWidth:l})},k=E.exports.useCallback((({actionType:e,dataSource:a})=>{t({actionType:e,optCol:a,actionVisible:!0})}),[t]),P=E.exports.useCallback((()=>{t({actionVisible:!1})}),[t]),F=E.exports.useCallback((()=>{const{actionType:t}=e;"preview"!==t?(h.success("add"===t?"\u6dfb\u52a0\u6210\u529f!":"\u7f16\u8f91\u6210\u529f!"),g(),P()):P()}),[P,g,e]),q=E.exports.useCallback((e=>{e&&y.confirm({title:"\u5220\u9664\u63d0\u9192",content:`\u786e\u5b9a\u5220\u9664 ${e.name.last} \u5417`,onOk(){h.success(`${e.name.last} \u5220\u9664\u6210\u529f!`),g()}})}),[g]),z=(...e)=>{const t=e[2];return m.createElement("div",null,m.createElement(p,{text:!0,type:"primary",onClick:()=>k({actionType:"edit",dataSource:t})},"\u7f16\u8f91"),"\xa0\xa0",m.createElement(p,{text:!0,type:"primary",onClick:()=>q(t)},"\u5220\u9664"),"\xa0\xa0",m.createElement(p,{text:!0,type:"primary",onClick:()=>k({actionType:"preview",dataSource:t})},"\u67e5\u770b"))};return m.createElement("div",{className:N},m.createElement(v,{free:!0},m.createElement(v.Content,null,m.createElement(x,o(s({},c),{onResizeChange:w,emptyContent:f?m.createElement(S,{onRefresh:b}):m.createElement(j,null),primaryKey:"email"}),m.createElement(x.Column,{title:"name",dataIndex:"name.last",resizable:!0,width:r.name}),m.createElement(x.Column,{title:"email",dataIndex:"email",resizable:!0,width:r.email}),m.createElement(x.Column,{title:"phone",dataIndex:"phone",resizable:!0,width:r.phone}),m.createElement(x.Column,{title:"gender",dataIndex:"gender",resizable:!0,width:r.gender}),m.createElement(x.Column,{title:"\u64cd\u4f5c",resizable:!0,width:r.operation,cell:z})),m.createElement(C,s({style:{marginTop:16,textAlign:"right"},totalRender:e=>m.createElement(m.Fragment,null,"\u5171"," ",m.createElement(p,{text:!0,type:"primary"},e)," ","\u4e2a\u8bb0\u5f55")},i)))),m.createElement(A,{visible:a,actionType:e.actionType,dataSource:l,onOk:F,onClose:P,onCancel:P}))},{Cell:K}=w,W=undefined,J=()=>E.exports.createElement(w,{gap:20},E.exports.createElement(K,{colSpan:12},E.exports.createElement(k,{title:"\u5f39\u7a97\u8868\u683c",breadcrumbs:[{name:"\u5217\u8868\u9875\u9762"},{name:"\u8868\u683c\u5217\u8868"},{name:"\u5f39\u7a97\u8868\u683c"}],description:"\u5f39\u7a97\u8868\u683c\u5f39\u7a97\u8868\u683c\u5f39\u7a97\u8868\u683c\u5f39\u7a97\u8868\u683c\u5f39\u7a97\u8868\u683c\u5f39\u7a97\u8868\u683c\u5f39\u7a97\u8868\u683c\u5f39\u7a97\u8868\u683c\u5f39\u7a97\u8868\u683c"})),E.exports.createElement(K,{colSpan:12},E.exports.createElement(M,null)));export{J as default};
